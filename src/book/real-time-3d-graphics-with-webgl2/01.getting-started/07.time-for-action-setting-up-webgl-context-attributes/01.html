<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>01.07</title>
  </head>
  <body>
    <div style="text-align: center">
      <canvas id="canvas01" style="width: 1000px; height: 600px; border: 1px solid #000"></canvas>
    </div>

    <script>
      window.addEventListener(
        'load',
        function () {
          const dpr = window.devicePixelRatio || 1;
          /** @type {HTMLCanvasElement} */
          const canvas = document.getElementById('canvas01');
          const width = canvas.clientWidth;
          const height = canvas.clientHeight;
          canvas.width = width * dpr;
          canvas.height = height * dpr;
          const gl = canvas.getContext('webgl2');

          draw();

          function draw() {}

          /**
           *
           * @param {[GLclampf,GLclampf,GLclampf,GLclampf]} color
           */
          function updateClearColor(...color) {
            gl.clearColor(...color);
            gl.clear(gl.COLOR_BUFFER_BIT);
            gl.viewport(0, 0, 0, 0);
          }

          /**
           *
           * @param {KeyboardEvent} event
           */
          function checkKey(event) {
            switch (event.key) {
              case '1':
                updateClearColor(0.2, 0.8, 0.2, 1.0);
                break;
              case '2':
                updateClearColor(0.2, 0.2, 0.8, 1.0);
                break;
              case '3':
                updateClearColor(Math.random(), Math.random(), Math.random(), 1);
                break;
              case '4':
                {
                  /** @type {Float32Array} */
                  const clearColor = gl.getParameter(gl.COLOR_CLEAR_VALUE);
                  console.log(clearColor);
                }
                break;
            }
          }

          window.addEventListener('keydown', checkKey);
        },
        false,
      );
    </script>
  </body>
</html>
